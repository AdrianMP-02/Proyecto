<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Gestor de Proyectos</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .top-nav {
            background-color: #2c3e50;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #34495e;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
            border-radius: 4px;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #3498db;
        }

        .user-menu {
            cursor: pointer;
            padding: 10px;
        }

        .main-container {
            display: flex;
            min-height: calc(100vh - 60px);
        }

        .sidebar {
            width: 250px;
            background-color: #2c3e50;
            color: white;
            padding: 20px;
        }

        .content {
            flex: 1;
            padding: 20px;
        }

        .proyecto-item {
            padding: 10px;
            margin: 5px 0;
            background-color: #34495e;
            border-radius: 4px;
            cursor: pointer;
        }

        .proyecto-item:hover {
            background-color: #3498db;
        }

        .nuevo-proyecto-btn {
            width: 100%;
            padding: 10px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 4px;
            margin-top: 20px;
            cursor: pointer;
        }

        .welcome-section {
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 8px;
        margin-bottom: 30px;
        }

        .date-display {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .greeting {
            color: #2c3e50;
            font-size: 2em;
            margin-top: 0;
        }
    </style>
</head>

<body>
    <nav class="top-nav">
        <h2>Gestor de Proyectos</h2>
        <div class="dropdown">
            <div class="user-menu">
                <%= usuario.nombre %> ▼
            </div>
            <div class="dropdown-content">
                <a href="/perfil">Mi Perfil</a>
                <a href="/configuracion">Configuración</a>
                <a href="/logout">Cerrar Sesión</a>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <h3>Mis Proyectos</h3>
            <% proyectos.forEach(function(proyecto) { %>
                <div class="proyecto-item" onclick="window.location.href='/proyectos/<%= proyecto.id %>'">
                    <%= proyecto.nombre %>
                </div>
                <% }); %>
                    <button class="nuevo-proyecto-btn" onclick="window.location.href='/proyectos/nuevo'">
                        Nuevo Proyecto
                    </button>
        </div>

        <div class="content">
            <% const dias=['Domingo', 'Lunes' , 'Martes' , 'Miércoles' , 'Jueves' , 'Viernes' , 'Sábado' ]; const
                meses=['Enero', 'Febrero' , 'Marzo' , 'Abril' , 'Mayo' , 'Junio' , 'Julio' , 'Agosto' , 'Septiembre'
                , 'Octubre' , 'Noviembre' , 'Diciembre' ]; const fecha=new Date(); const hora=fecha.getHours(); let
                saludo; if (hora>= 6 &&
                hora < 12) { saludo='Buenos días' ; } else if (hora>= 12 && hora < 20) { saludo='Buenas tardes' ; } else
                        { saludo='Buenas noches' ; } %>

                        <div class="welcome-section">
                            <h2 class="date-display">
                                <%= dias[fecha.getDay()] %>, <%= fecha.getDate() %> de <%= meses[fecha.getMonth()] %>
                            </h2>
                            <h1 class="greeting">
                                <%= saludo %>, <%= usuario.nombre %>
                            </h1>
                        </div>
        </div>
    </div>
</body>

</html>